<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Merriweather:wght@700&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" href="favicon.png">
  <link rel="stylesheet" href="./css/styles.css">
  <title>MILPA • Oral History Collection</title>
</head>

<body>
  <!-- Top Logo -->
  <div class="logo-banner">
    <div class="logo-hover-wrap">
      <a href="index.html" class="logo-hover-wrap">
        <img src="./img/MAPP Logo.png" alt="Default Logo" class="logo-default">
        <img src="./img/MAPP Logo highlight.png" alt="Hover Logo" class="logo-hover">
      </a>
    </div>
  </div>

  <!-- Top Nav -->
  <div class="banner">
    <nav>
      <a href="index.html">Home</a>
      <a href="about.html">About</a>
      <a href="projects.html">Projects</a>
      <a href="OHC.html" aria-current="page">Oral History Collection</a>
      <a href="events.html">Local Events</a>
    </nav>
  </div>

  <!-- HERO -->
  <header class="oh-hero">
    <div class="oh-hero__inner">
      <h1 class="aboutHeaders">Oral History Collection</h1>
      <p class="oh-hero__lead">
        A living archive of multilingual interviews with North Texas community members involved in food and agriculture —
        documenting traditional practices, contemporary innovations, and the voices shaping our regional foodways.
      </p>

      <div class="oh-cta">
        <a class="oh-btn" href="https://oralhistory.unt.edu/our-collection" target="_blank" rel="noopener">Browse the Collection</a>
        <a class="oh-btn oh-btn--outline" href="https://oralhistory.unt.edu/digital-projects-and-collections" target="_blank" rel="noopener">Digital Projects & Collections</a>
        <a class="oh-btn" href="https://docs.google.com/forms/d/e/1FAIpQLSdIYj8EVAvAT7Uiy9OimYss_7vuWIcKTpLD_nO9aKv4pAOEXA/viewform">Contribute Your Story</a>
      </div>
    </div>
  </header>

  <!-- INTRO -->
  <section class="oh-intro">
    <p class="eventD" style="max-width: 720px;">
      Our growing archive preserves knowledge about planting, harvesting, cooking, entrepreneurship, and community advocacy.
      Interviews feature farmers, gardeners, chefs, food entrepreneurs, and organizers, reflecting the rich tapestry of
      agricultural knowledge in North Texas. This collection supports research, teaching, and community engagement.
    </p>
  </section>

  

  <!-- HOW IT WORKS -->
  <section class="oh-section">
    <h2 class="oh-h2">How It Works</h2>
    <ol class="oh-steps">
      <li><strong>Interviews</strong> are recorded with community members across North Texas in multiple languages.</li>
      <li><strong>Transcripts & metadata</strong> are prepared to support research and discovery.</li>
      <li><strong>Access</strong> is provided through UNT’s Oral History Program portal.</li>
    </ol>
  </section>



  <!-- CALL TO ACTION -->
  <section class="oh-ctaFoot">
    <h2 class="oh-h2">Explore the full collection</h2>
    <p class="oh-ctaFoot__p">Search interviews, transcripts, and related materials in the UNT Oral History portal.</p>
    <a class="oh-btn" href="https://oralhistory.unt.edu/our-collection" target="_blank" rel="noopener">Go to Collection</a>
  </section>

  <!-- ORAL HISTORY SEARCH + FILTER SYSTEM -->
<section class="oh-section">
  <h2 class="oh-h2">Explore Interviews</h2>

  <!-- Search Bar -->
  <input 
    type="text" 
    id="oh-search" 
    placeholder="Search by title, interviewee, or theme..."
    style="width:100%;max-width:700px;margin:0 auto 20px auto;display:block;padding:10px;font-size:1rem;border-radius:8px;border:1px solid #c7dfb0;"
  >

  <!-- Tag Filters -->
  <div id="oh-tags" class="oh-chips" style="margin-bottom:20px;"></div>

  <!-- Results Grid -->
  <div id="oh-results" class="oh-grid"></div>
</section>

<!-- DYNAMIC LOADING SCRIPT -->
<script>
  let ohData = [];
  let ohActiveTags = new Set();

  // Load JSON
  fetch("data.json")
    .then(res => res.json())
    .then(json => {
      ohData = json;
      renderTags();
      renderResults();
    });

  function renderTags() {
    const tagContainer = document.getElementById("oh-tags");
    const allTags = new Set();

    ohData.forEach(item => {
      item.tags.forEach(tag => allTags.add(tag));
    });

    tagContainer.innerHTML = "";
    [...allTags].sort().forEach(tag => {
      const span = document.createElement("span");
      span.className = "chip";
      span.textContent = tag;
      span.onclick = () => toggleTag(tag, span);
      tagContainer.appendChild(span);
    });
  }

  function toggleTag(tag, el) {
    if (ohActiveTags.has(tag)) {
      ohActiveTags.delete(tag);
      el.classList.remove("chip-active");
    } else {
      ohActiveTags.add(tag);
      el.classList.add("chip-active");
    }
    renderResults();
  }

  function renderResults() {
    const searchText = document.getElementById("oh-search").value.toLowerCase();
    const container = document.getElementById("oh-results");

    container.innerHTML = "";

    ohData
      .filter(item => {
        const matchesSearch =
          item.title.toLowerCase().includes(searchText) ||
          item.interviewee.toLowerCase().includes(searchText) ||
          item.summary.toLowerCase().includes(searchText);

        const matchesTags =
          ohActiveTags.size === 0 ||
          [...ohActiveTags].every(tag => item.tags.includes(tag));

        return matchesSearch && matchesTags;
      })
      .forEach(item => {
        container.innerHTML += `
  <div class="oh-card">
    <div class="oh-card__media">
  <img 
    src="${item.image}" 
    alt="Photograph related to the oral history interview with ${item.interviewee}"
    class="oh-card__image"
  >
</div>

    <div class="oh-card__body">
      <h3 class="oh-card__title">${item.title}</h3>
      <p class="oh-card__meta">${item.interviewee} • ${item.year}</p>
      <p class="oh-card__desc">${item.summary}</p>
      <a class="oh-card__link" href="item.html?id=${item.id}">View Details →</a>
    </div>
  </div>
`;


      });
  }

  // Live search
  document.getElementById("oh-search").addEventListener("input", renderResults);
</script>

<style>
  /* Optional: highlight active tags */
  .chip-active {
    background:#136611 !important;
    color:white !important;
    border-color:#136611 !important;
  }
</style>


  <!-- Bottom Navigation -->
  <div class="banner">
    <nav>
      <a href="index.html">Home</a>
      <a href="about.html">About</a>
      <a href="projects.html">Projects</a>
      <a href="OHC.html" aria-current="page">Oral History Collection</a>
      <a href="events.html">Local Events</a>
    </nav>
  </div>

  <!-- Footer -->
  <div class="footer">
    <div class="footer-content">
      <p class="sponsors-heading">This initiative is made possible through the support of our institutional sponsors.</p>
      <div class="sponsors">
        <img src="./img/USDA.png" alt="USDA - National Institute of Food and Agriculture" class="sponsor-logo">
        <img src="./img/untlogo.png" alt="University of North Texas" class="sponsor-logo">
      </div>

      <div class="contact-section">
        <p class="contact-heading">Contact Us!</p>
        <div class="contact-info">
          <p>
            Michael Wise — <a href="mailto:Michael.Wise@unt.edu" class="contact-email">Michael.Wise@unt.edu</a><br>
            Sandra Mendiola Garcia — <a href="mailto:Sandra.Mendiolagarcia@unt.edu" class="contact-email">Sandra.Mendiolagarcia@unt.edu</a>
          </p>
        </div>
      </div>

      <p class="copyright">© 2025 MAPP, All Rights Reserved</p>
    </div>
  </div>
</body>
</html>
